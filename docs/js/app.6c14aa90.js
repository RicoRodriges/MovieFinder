(function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],p=0,v=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(v.length)v.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"015a":function(e,t,n){},"034f":function(e,t,n){"use strict";n("85ec")},"071f":function(e,t,n){e.exports=n.p+"img/no-movie.1032a868.svg"},"07cb":function(e,t,n){"use strict";n("456c")},"133b":function(e,t,n){e.exports=n.p+"img/sort.1a678f3c.svg"},"22e2":function(e,t,n){},"22ee":function(e,t,n){"use strict";n("3549")},3549:function(e,t,n){},"3f8a":function(e,t,n){},"42a8":function(e,t,n){e.exports=n.p+"img/star.131946e7.svg"},"44d5":function(e,t,n){},"44ee":function(e,t,n){},"456c":function(e,t,n){},"4b22":function(e,t,n){"use strict";n("44d5")},"515c":function(e,t,n){},5499:function(e,t,n){"use strict";n("5b51")},"5b51":function(e,t,n){},"5dd6":function(e,t,n){"use strict";n("22e2")},"5ee4":function(e,t,n){e.exports=n.p+"img/filter.f25396f2.svg"},"620c":function(e,t,n){"use strict";n("3f8a")},"66d9":function(e,t,n){e.exports=n.p+"img/ru.ca1867fc.svg"},"7b8b":function(e,t,n){"use strict";n("44ee")},"7c96":function(e,t,n){e.exports=n.p+"img/star-checked.ed62f3d2.svg"},"85ec":function(e,t,n){},"8e8a":function(e,t,n){},9292:function(e,t,n){"use strict";n("9cf2")},"9cf2":function(e,t,n){},a2eb:function(e,t,n){"use strict";n("015a")},bc04:function(e,t,n){e.exports=n.p+"img/en.fddefaae.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a=n("2b0e"),i=n("b85c"),s=(n("7db0"),n("2ca0"),n("b64b"),n("a925"));(function(e){e["EN"]="en",e["RU"]="ru"})(r||(r={}));var o=n("3835"),c=n("5530");n("99af"),n("4fad"),n("ac1f"),n("466d"),n("4d63"),n("25f0"),n("5319");function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object(c["a"])({path:"/"},n),n.expires&&n.expires.toUTCString&&(n.expires=n.expires.toUTCString());for(var r="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t)),a=0,i=Object.entries(n);a<i.length;a++){var s=Object(o["a"])(i[a],2),u=s[0],l=s[1];r+="; ".concat(u),!0!==l&&(r+="=".concat(l))}document.cookie=r}function l(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}var p,v=n("ade3"),d=(p={},Object(v["a"])(p,r.EN,{lang:"English",siteName:"Movie finder",message:{cache_warning:"This site does not store user data.<br/>Actor and movie sets are not synchronized with other devices and will be irrevocably lost after web page refreshing!"},actor:{placeholder:"Input actor name",emptyPlaceholder:"Start writing actor name",notFoundPlaceholder:"Actors were not found",nActors:"0 actor | 1 actor | {n} actors | {n} actors",actorName:"Actor name",selectedNActors:"Selected 0 actor | Selected 1 actor | Selected {n} actors | Selected {n} actors",clearList:"Remove all actors",appendToList:"Append from actor set",appendToSet:"Append to actor set",showAll:"Show all actors",excludeMovies:"Exclude actors in set"},movie:{placeholder:"Input movie name",emptyPlaceholder:"Start writing movie name",notFoundPlaceholder:"Movies were not found",genres:"Genres",movieName:"Movie name",selectedNMovies:"Selected 0 movie | Selected 1 movie | Selected {n} movies | Selected {n} movies",trailer:"trailer",findTrailer:"Find trailer",clearList:"Remove all movies",appendToList:"Append from movie set",appendToSet:"Append to movie set",showAll:"Show all movies",excludeMovies:"Exclude movies in set"},paginator:{previous:"Previous",next:"Next"},filter:{filters:"Filters",chooseGenresToInclude:"Choose genres",chooseGenresToExclude:"Choose genres to exclude",year:"Year:",validYearRange:"Valid year range is {min} - {max}",sort:"Sorting",sortBy:"Sort by"},general:{popularity:"Popularity",vote:"Vote",chooseOptions:"Choose options...",year:"Year",showDetails:"Show details...",andOthers:"and others",nTimes:"0 time | 1 time | {n} times | {n} times",recommended:"Recommended",loading:"Loading...",startSearch:"Start search",searchRecommendations:"Recommendations",searchSeries:"Series",searchPopular:"Popular",searchWatchTogether:"Watch together",searchMayLike:"May like"},set:{import:"Import from file",export:"Export to file",add:"Add to set",remove:"Remove from set"},pages:{movieSet:"Movie set",actorSet:"Actor set",searchByActors:"Search by actors",searchByMovies:"Search by movies",searchActorsByMovies:"Search actors by movies"}}),Object(v["a"])(p,r.RU,{lang:"Русский",siteName:"Поисковик фильмов",message:{cache_warning:"Сайт не хранит пользовательские данные.<br/>Коллекции не синхронизируется с другими устройствами и будут безвозвратно утерян после обновления страницы!"},actor:{placeholder:"Введите имя актёра",emptyPlaceholder:"Начните вводить имя актёра",notFoundPlaceholder:"Актёры не найдены",nActors:"0 актёров | 1 актёр | {n} актёра | {n} актёров",actorName:"Имя актёра",selectedNActors:"Выбрано 0 актёров | Выбран 1 актёр | Выбрано {n} актёра | Выбрано {n} актёров",clearList:"Очистить список актёров",appendToList:"Добавить из коллекции",appendToSet:"Добавить в коллекцию",showAll:"Показать всех актёров",excludeMovies:"Исключить актёров в коллекции"},movie:{placeholder:"Введите название фильма",emptyPlaceholder:"Начните вводить название фильма",notFoundPlaceholder:"Фильмы не найдены",genres:"Жанры",movieName:"Название фильма",selectedNMovies:"Выбрано 0 фильмов | Выбран 1 фильм | Выбрано {n} фильма | Выбрано {n} фильмов",trailer:"трейлер",findTrailer:"Найти трейлер",clearList:"Очистить список фильмов",appendToList:"Добавить из коллекции",appendToSet:"Добавить в коллекцию",showAll:"Показать все фильмы",excludeMovies:"Исключить фильмы в коллекции"},paginator:{previous:"Предыдущая",next:"Следующая"},filter:{filters:"Фильтры",chooseGenresToInclude:"Выберите жанры",chooseGenresToExclude:"Выберите жанры для исключения",year:"Год:",validYearRange:"Валидный промежуток {min} - {max} лет",sort:"Сортировка",sortBy:"Сортировать по"},general:{popularity:"Популярность",vote:"Рейтинг",chooseOptions:"Выберите поле...",year:"Год",showDetails:"Подробнее...",andOthers:"и другие",nTimes:"0 раз | 1 раз | {n} раза | {n} раз",recommended:"Рекомендован",selected:"Выбрано",loading:"Загрузка...",startSearch:"Начать поиск",searchRecommendations:"Рекомендации",searchSeries:"Серии",searchPopular:"Популярное",searchWatchTogether:"Смотрят вместе",searchMayLike:"Может понравиться"},set:{import:"Загрузить из файла",export:"Выгрузить в файл",add:"Добавить в коллекцию",remove:"Удалить из коллекции"},pages:{movieSet:"Коллекция фильмов",actorSet:"Коллекция актёров",searchByActors:"Поиск по актёрам",searchByMovies:"Поиск по фильмам",searchActorsByMovies:"Поиск актёров по фильмам"}}),p);function h(e,t){return e.find((function(e){return t.startsWith(e)}))}s["a"].prototype.getChoiceIndex=function(e,t){switch(this.locale){case r.RU:if(0===e)return 0;var n=e>10&&e<20,a=e%10===1;return!n&&a?1:!n&&e%10>=2&&e%10<=4||t<4?2:3;default:return e>=2?2:1===e?1:0}};var f="lang";function m(){var e,t=Object.keys(d),n=l(f);if(n&&(e=h(t,n)),void 0===e)if(window.navigator.languages){var a,s=Object(i["a"])(window.navigator.languages);try{for(s.s();!(a=s.n()).done;){var o=a.value,c=h(t,o);if(c){e=c;break}}}catch(p){s.e(p)}finally{s.f()}}else{var u=h(t,window.navigator.userLanguage||window.navigator.language);u&&(e=u)}return void 0===e?r.EN:e}function g(e,t){u(f,e,{"max-age":2592e3}),t.locale=e}a["a"].use(s["a"]);var b=new s["a"]({locale:m(),fallbackLocale:r.EN,messages:d}),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("NavBar",{attrs:{siteName:e.siteName,"current-page":e.currentPage.name,pages:e.pages.map((function(e){return e.name}))},on:{onChange:e.navigate}}),n("div",{staticClass:"m-1",attrs:{role:"main"}},[n("keep-alive",[n(e.currentPage.component,{tag:"component"})],1)],1)],1)},O=[],k=n("d4ec"),j=n("bee2"),x=n("262e"),w=n("2caf"),_=(n("b0c0"),n("9ab4")),S=n("1b40"),C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[r("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e._v(e._s(e.$t(e.siteName)))]),r("button",{staticClass:"navbar-toggler",attrs:{type:"button"},on:{click:function(t){e.showMenu=!e.showMenu}}},[r("span",{staticClass:"navbar-toggler-icon"})]),r("div",{staticClass:"collapse navbar-collapse",class:{show:e.showMenu}},[r("ul",{staticClass:"navbar-nav mr-auto"},e._l(e.pages,(function(t){return r("li",{key:t,staticClass:"nav-item mr-2",class:{active:t===e.currentPage}},[r("a",{staticClass:"nav-link",class:{disabled:t===e.currentPage},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.onChange(t)}}},[e._v(" "+e._s(e.$t(t))+" ")])])})),0),r("div",{staticClass:"d-inline-block"},[r("img",{staticClass:"flag mx-2",attrs:{src:n("bc04"),alt:"en",title:"English"},on:{click:function(t){return e.changeLocale("en")}}}),r("img",{staticClass:"flag mx-2",attrs:{src:n("66d9"),alt:"ru",title:"Русский"},on:{click:function(t){return e.changeLocale("ru")}}})])])])},M=[],R=n("91dc"),P=n("2f62");a["a"].use(P["a"]);var A=new P["a"].Store({}),T=Object(R["createModule"])("general",{state:{lang:b.locale},mutations:{changeLocale:function(e,t){g(t,b),e.lang=t}}});T.register(A);var $=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.showMenu=!1,e}return Object(j["a"])(n,[{key:"onChange",value:function(e){}},{key:"changeLocale",value:function(e){T.mutations.changeLocale(e)}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],$.prototype,"siteName",void 0),Object(_["a"])([Object(S["c"])()],$.prototype,"pages",void 0),Object(_["a"])([Object(S["c"])()],$.prototype,"currentPage",void 0),Object(_["a"])([Object(S["b"])("onChange")],$.prototype,"onChange",null),$=Object(_["a"])([S["a"]],$);var F=$,D=F,I=(n("f702"),n("2877")),E=Object(I["a"])(D,C,M,!1,null,"c88040f2",null),N=E.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"alert alert-secondary my-3 mx-2",domProps:{innerHTML:e._s(e.$t("message.cache_warning"))}}),n("ActorSelector",{attrs:{setActions:!1},model:{value:e.selectedActors,callback:function(t){e.selectedActors=t},expression:"selectedActors"}}),n("div",{staticClass:"my-3 text-center"},[e.inProgress?e._e():n("button",{staticClass:"btn btn-success mt-3 mb-1 d-inline-block",attrs:{type:"button"},on:{click:e.onImport}},[e._v(" "+e._s(e.$t("set.import"))+" ")]),n("br"),!e.inProgress&&e.selectedActors.length>0?n("button",{staticClass:"btn btn-success mb-3 d-inline-block",attrs:{type:"button"},on:{click:e.onExport}},[e._v(" "+e._s(e.$t("set.export"))+" ")]):e._e()]),e.inProgress?n("ModalProgress",{attrs:{ready:e.progress[0],total:e.progress[1]}}):e._e()],1)},L=[],B=n("1da1"),G=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"modal show d-block",attrs:{tabindex:"-1"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered modal-xl"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",style:{width:e.progress+"%"}},[e._v(" "+e._s(e.progress+"%")+" ")])]),n("div",{staticClass:"text-center mt-1"},[e._v(e._s(e.ready)+" / "+e._s(e.total))]),n("div",{staticClass:"text-center mt-3"},[e._v(e._s(e.$t("general.loading")))])])])])]),n("div",{staticClass:"modal-backdrop show"})])}),z=[],q=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"progress",get:function(){return Math.floor(100*this.ready/this.total)}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],q.prototype,"ready",void 0),Object(_["a"])([Object(S["c"])()],q.prototype,"total",void 0),q=Object(_["a"])([S["a"]],q);var V=q,Y=V,H=Object(I["a"])(Y,G,z,!1,null,"3e37a0a0",null),W=H.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" "+e._s(e.$t("actor.actorName"))+": "),r("ItemSelector",{staticClass:"d-inline-block",staticStyle:{"max-width":"600px"},attrs:{suggest:e.suggest,changeDebounceTime:500,placeholder:e.$t("actor.placeholder"),emptyPlaceholder:e.$t("actor.emptyPlaceholder"),notFoundPlaceholder:e.$t("actor.notFoundPlaceholder")},on:{onSelect:e.onSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"d-inline-block align-middle mr-2"},[t.item.poster?r("img",{staticClass:"option__image",attrs:{src:t.item.poster,alt:t.item.name}}):r("img",{staticClass:"option__image",attrs:{src:n("fa1d"),alt:t.item.name}})]),r("div",{staticClass:"option__desc d-inline-block align-middle"},[r("div",{staticClass:"option__title font-weight-bold h3"},[e._v(e._s(t.item.name))]),r("div",{staticClass:"option__small text-muted"},[e._v(" "+e._s(e.$t("general.popularity"))+": "+e._s(t.item.popularity)+" ")])])]}}])}),r("div",{staticClass:"my-1 text-center"},[e.value.length>0?r("button",{staticClass:"btn btn-danger d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onClear}},[e._v(" "+e._s(e.$t("actor.clearList"))+" ")]):e._e(),e.setActions&&e.actorSet.length>0?r("button",{staticClass:"btn btn-success d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onAppendFromSet}},[e._v(" "+e._s(e.$t("actor.appendToList"))+" ")]):e._e(),e.setActions&&e.value.length>0?r("button",{staticClass:"btn btn-success d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onAppendToSet}},[e._v(" "+e._s(e.$t("actor.appendToSet"))+" ")]):e._e()]),e.value.length>0?r("div",{staticClass:"my-3"},[r("h5",[e._v(e._s(e.$tc("actor.selectedNActors",e.value.length))+":")]),r("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},e._l(e.value,(function(t){return r("PersonView",{key:t.id,staticStyle:{width:"200px"},attrs:{person:t},on:{onDelete:e.onDelete}})})),1)]):e._e()],1)},X=[],J=n("2909"),Q=(n("4e82"),n("4de4"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("d81d"),n("d7a8")),Z=n("8868");n("fb6a"),n("a15b");function ee(e,t){return te.apply(this,arguments)}function te(){return te=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n?"?".concat(Object.entries(n).map((function(e){var t=Object(o["a"])(e,2),n=t[0],r=t[1];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))})).join("&")):"",e.prev=1,e.next=4,fetch(t+r);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),te.apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(Z["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=s.length>2&&void 0!==s[2]?s[2]:200,a=0;case 2:if(!(a<t.length)){e.next=11;break}return i=t.slice(a,a+n).map((function(e){return e()})),e.next=6,Promise.all(i);case 6:return e.next=8,Object(Q["a"])(ne(r));case 8:a+=n,e.next=2;break;case 11:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}var se=function e(t,n){Object(k["a"])(this,e),this.id=t,this.name=n},oe=function e(t,n){Object(k["a"])(this,e),this.id=t,this.name=n},ce=function e(t,n,r,a,i,s,o,c,u){Object(k["a"])(this,e),this.id=t,this.title=n,this.overview=r,this.genres=a,this.popularity=i,this.poster=s,this.voteCount=o,this.voteAverage=c,this.releaseDate=u},ue=function(){function e(t,n,r,a,i,s,o,c,u,l){Object(k["a"])(this,e),this.id=t,this.title=n,this.originalTitle=r,this.overview=a,this.genres=i,this.popularity=s,this.poster=o,this.voteCount=c,this.voteAverage=u,this.releaseDate=l}return Object(j["a"])(e,[{key:"toMovie",value:function(){return new ce(this.id,this.title,this.overview,this.genres.map((function(e){return new oe(e.id,e.name)})),this.popularity,this.poster,this.voteCount,this.voteAverage,this.releaseDate)}}]),e}(),le=function e(t,n,r,a){Object(k["a"])(this,e),this.id=t,this.name=n,this.popularity=r,this.poster=a},pe=function(){function e(t,n,r,a){Object(k["a"])(this,e),this.id=t,this.name=n,this.popularity=r,this.poster=a}return Object(j["a"])(e,[{key:"toPerson",value:function(){return new le(this.id,this.name,this.popularity,this.poster)}}]),e}(),ve=function(){function e(){Object(k["a"])(this,e),this.genres=new Map}return Object(j["a"])(e,[{key:"getMovieUrl",value:function(t,n){return new URL("".concat(e.host,"/movie/").concat(t,"?language=").concat(n))}},{key:"getPersonUrl",value:function(t,n){return new URL("".concat(e.host,"/person/").concat(t,"?language=").concat(n))}},{key:"searchPerson",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/search/person"),{api_key:e.apiKey,language:r,include_adult:"true",query:n});case 2:if(a=t.sent,!(a.total_results>0)){t.next=5;break}return t.abrupt("return",a.results.map((function(e){return i.responseToPerson(e)})));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"searchMovie",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/search/movie"),{api_key:e.apiKey,language:r,include_adult:"true",query:n});case 2:if(a=t.sent,!(a.total_results>0)){t.next=5;break}return t.abrupt("return",Promise.all(a.results.map(function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.responseToMovie(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getPerson",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/person/").concat(n),{api_key:e.apiKey,language:r});case 2:if(a=t.sent,void 0===a.id){t.next=5;break}return t.abrupt("return",this.responseToPerson(a));case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getMovie",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/movie/").concat(n),{api_key:e.apiKey,language:r});case 2:if(a=t.sent,void 0===a.id){t.next=5;break}return t.abrupt("return",this.responseToMovie(a,r));case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getRecommendations",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(t){return o.getRequest("".concat(e.apiHost,"/movie/").concat(n,"/recommendations"),{api_key:e.apiKey,language:r,page:t.toString()})},i=function(e){return e.total_pages},s=function(e){return e.results.map(function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o.responseToMovie(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},t.abrupt("return",this.fetchAllPages(a,i,s));case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"searchPersonsByMovie",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/movie/").concat(n,"/credits"),{api_key:e.apiKey,language:r});case 2:return a=t.sent,t.abrupt("return",a.cast.filter((function(e){return"Acting"===e.known_for_department})).sort((function(e,t){return e.order-t.order})).map((function(e){return i.responseToPerson(e)})));case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"searchMoviesByPerson",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/person/").concat(n,"/movie_credits"),{api_key:e.apiKey,language:r});case 2:return a=t.sent,t.abrupt("return",Promise.all(a.cast.map(function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.responseToMovie(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getCollectionByMovie",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/movie/").concat(n),{api_key:e.apiKey,language:r});case 2:return i=t.sent,t.abrupt("return",null===(a=i.belongs_to_collection)||void 0===a?void 0:a.id);case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getCollectionMovies",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/collection/").concat(n),{api_key:e.apiKey,language:r});case 2:return a=t.sent,t.abrupt("return",Promise.all(a.parts.map(function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.responseToMovie(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"getGenres",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.genres.get(t),n||(n=this.requestGenres(t),this.genres.set(t,n)),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestGenres",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n){var r,a,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRequest("".concat(e.apiHost,"/genre/movie/list"),{api_key:e.apiKey,language:n});case 2:r=t.sent,a=new Map,s=Object(i["a"])(r.genres);try{for(s.s();!(o=s.n()).done;)c=o.value,a.set(c.id,new se(c.id,c.name))}catch(u){s.e(u)}finally{s.f()}return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getRequest",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,ee(n,r);case 3:if(a=t.sent,429===a.status){t.next=6;break}return t.abrupt("return",a.json());case 6:return t.next=8,ne(e.timeout);case 8:t.next=0;break;case 10:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"responseToPerson",value:function(t){return new pe(t.id,t.name,t.popularity,t.profile_path?new URL("".concat(e.posterPathRoot,"/").concat(t.profile_path)):void 0)}},{key:"responseToMovie",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getGenres(r);case 2:return a=t.sent,i=void 0!==n.genres?n.genres.map((function(e){return a.get(e.id)})):n.genre_ids.map((function(e){return a.get(e)})),t.abrupt("return",new ue(n.id,n.title,n.original_title,n.overview,i,n.popularity,n.poster_path?new URL("".concat(e.posterPathRoot,"/").concat(n.poster_path)):void 0,n.vote_count,n.vote_average,new Date(n.release_date)));case 5:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"fetchAllPages",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s,o,c,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]?u[3]:void 0,i=u.length>4&&void 0!==u[4]?u[4]:1,e.next=4,t(i);case 4:return s=e.sent,o=n(s)>i&&(void 0===a||a>=i)?this.fetchAllPages(t,n,r,a,i+1):new Promise((function(e){return e([])})),e.next=8,Promise.all(r(s));case 8:return c=e.sent,e.t0=c,e.next=12,o;case 12:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}();ve.apiKey="3706398aaf547b46e616831a46402288",ve.apiHost="https://api.themoviedb.org/3",ve.posterPathRoot="https://image.tmdb.org/t/p/w500/",ve.timeout=3e3,ve.host="https://www.themoviedb.org";var de=new ve,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card m-2"},[r("button",{staticClass:"close position-absolute p-2",staticStyle:{top:"0",right:"0"},attrs:{type:"button"},on:{click:function(t){return e.onDelete(e.person)}}},[r("span",[e._v("×")])]),r("div",[r("a",{attrs:{href:e.getUrl(e.person.id),target:"_blank"}},[e.person.poster?r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:e.person.poster,alt:e.person.name}}):r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:n("fa1d"),alt:e.person.name}})])]),r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-text"},[e._v(e._s(e.person.name))])])])},fe=[],me=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"getUrl",value:function(e){return this.api.getPersonUrl(e,this.lang)}},{key:"onDelete",value:function(e){}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],me.prototype,"person",void 0),Object(_["a"])([Object(S["b"])("onDelete")],me.prototype,"onDelete",null),me=Object(_["a"])([S["a"]],me);var ge=me,be=ge,ye=(n("5dd6"),Object(I["a"])(be,he,fe,!1,null,"584e0451",null)),Oe=ye.exports,ke=Object(R["createModule"])("actor-set",{namespaced:!0,state:{selectedActors:[]},mutations:{setActors:function(e,t){e.selectedActors=t}}});ke.register(A);var je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("multiselect",{attrs:{loading:e.isLoading,"internal-search":!1,placeholder:e.placeholder,options:e.items,"option-height":104,"show-labels":!1,preserveSearch:!0},on:{"search-change":e.onChangeDebounce,select:e.onSelect},scopedSlots:e._u([{key:"option",fn:function(t){return[e._t("default",null,{item:t.option})]}},{key:"noOptions",fn:function(){return[e._v(e._s(e.emptyPlaceholder))]},proxy:!0},{key:"noResult",fn:function(){return[e._v(e._s(e.notFoundPlaceholder))]},proxy:!0}],null,!0)})},xe=[],we=n("b012"),_e=n("8e5f"),Se=n.n(_e),Ce=(n("e607"),function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.isLoading=!1,e.items=[],e}return Object(j["a"])(n,[{key:"created",value:function(){this.changeDebounceTime?this.onChangeDebounce=Object(we["debounce"])(this.onSearchCustom,this.changeDebounceTime):this.onChangeDebounce=this.onSearchCustom}},{key:"beforeDestroy",value:function(){this.onChangeDebounce.clear&&this.onChangeDebounce.clear()}},{key:"onSearchCustom",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading){e.next=9;break}return e.prev=1,this.isLoading=!0,e.next=5,this.suggest(t);case 5:this.items=e.sent;case 6:return e.prev=6,this.isLoading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onSelect",value:function(e){}}]),n}(S["d"]));Object(_["a"])([Object(S["c"])()],Ce.prototype,"placeholder",void 0),Object(_["a"])([Object(S["c"])()],Ce.prototype,"emptyPlaceholder",void 0),Object(_["a"])([Object(S["c"])()],Ce.prototype,"notFoundPlaceholder",void 0),Object(_["a"])([Object(S["c"])()],Ce.prototype,"suggest",void 0),Object(_["a"])([Object(S["c"])()],Ce.prototype,"changeDebounceTime",void 0),Object(_["a"])([Object(S["b"])("onSelect")],Ce.prototype,"onSelect",null),Ce=Object(_["a"])([Object(S["a"])({components:{Multiselect:Se.a}})],Ce);var Me=Ce,Re=Me,Pe=Object(I["a"])(Re,je,xe,!1,null,"eadcdf5c",null),Ae=Pe.exports,Te=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"actorSet",get:function(){return ke.state.selectedActors}},{key:"suggest",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.api.searchPerson(t,this.lang);case 4:return e.abrupt("return",e.sent.sort((function(e,t){return t.popularity-e.popularity})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"input",value:function(e){}},{key:"onSelect",value:function(e){var t=this.value.find((function(t){return t.id===e.id}));void 0===t&&this.input([].concat(Object(J["a"])(this.value),[e]))}},{key:"onDelete",value:function(e){var t=this.value.find((function(t){return t.id===e.id}));void 0!==t&&this.input(this.value.filter((function(t){return t.id!==e.id})))}},{key:"onClear",value:function(){this.value.length>0&&this.input([])}},{key:"onAppendFromSet",value:function(){var e,t=Object(J["a"])(this.value),n=Object(i["a"])(this.actorSet);try{var r=function(){var n=e.value,r=t.find((function(e){return e.id===n.id}));void 0===r&&t.push(n)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}this.value.length!==t.length&&this.input(t)}},{key:"onAppendToSet",value:function(){var e,t=Object(J["a"])(this.actorSet),n=Object(i["a"])(this.value);try{var r=function(){var n=e.value,r=t.find((function(e){return e.id===n.id}));void 0===r&&t.push(n)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}this.actorSet.length!==t.length&&ke.mutations.setActors(t)}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],Te.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],Te.prototype,"setActions",void 0),Object(_["a"])([Object(S["b"])("input")],Te.prototype,"input",null),Te=Object(_["a"])([Object(S["a"])({components:{ItemSelector:Ae,PersonView:Oe}})],Te);var $e=Te,Fe=$e,De=(n("620c"),Object(I["a"])(Fe,K,X,!1,null,"2942639a",null)),Ie=De.exports,Ee=n("668b"),Ne=(n("6062"),n("5db2"));function Ue(e){return Object(Ne["b"])(e)}function Le(e){return Object(Ne["a"])(e)}function Be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",r=new Blob([e],{type:n}),a=document.createElement("a"),i=URL.createObjectURL(r);a.href=i,a.download=t,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(i)}),0)}function Ge(){return ze.apply(this,arguments)}function ze(){return ze=Object(B["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=document.createElement("input"),t.setAttribute("type","file"),t.style.display="none",document.body.append(t),e.abrupt("return",new Promise((function(e,n){var r=function r(a){var i=a.target.files;i&&i.length?e(i[0]):n(),t.removeEventListener("change",r),t.remove()};t.addEventListener("change",r),t.click()})));case 5:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function qe(){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Ge().then((function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(e){var r;(null===(r=e.target)||void 0===r?void 0:r.readyState)===FileReader.DONE?t(e.target.result):n()},r.readAsText(e)}))})));case 1:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}var Ye=function(){function e(){Object(k["a"])(this,e),this.api=de}return Object(j["a"])(e,[{key:"exportToFile",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a,s){var o,c,u,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=[[e.ID_COLUMN,"Name"]],c=Object(i["a"])(n);try{for(c.s();!(u=c.n()).done;)l=u.value,o.push([a(l),s(l)])}catch(v){c.e(v)}finally{c.f()}p=Ue(o),Be(e.UTF8_BOM+p,r,"text/csv");case 5:case"end":return t.stop()}}),t)})));function n(e,n,r,a){return t.apply(this,arguments)}return n}()},{key:"importFromFile",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,s,o,c,u,l,p,v,d,h,f,m,g,b,y,O,k,j;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qe();case 2:if(a=t.sent,s=Le(a),o=s.shift(),c=null===o||void 0===o?void 0:o.indexOf(e.ID_COLUMN),!(void 0!==c&&c>=0)){t.next=46;break}u=new Set,l=/^[0-9]+$/,p=Object(i["a"])(s);try{for(p.s();!(v=p.n()).done;)d=v.value,d.length>c&&l.test(d[c])&&u.add(parseInt(d[c],10))}catch(x){p.e(x)}finally{p.f()}if(!(u.size>0)){t.next=46;break}h=Object(J["a"])(u).map((function(e){return function(){return n(e)}})),f=h.length,r.update(0,f),m=[],g=!1,b=!1,t.prev=18,O=Object(Ee["a"])(ae(h,e.MAX_ACTIONS));case 20:return t.next=22,O.next();case 22:if(!(g=!(k=t.sent).done)){t.next=29;break}j=k.value,m.push.apply(m,Object(J["a"])(j)),r.update(m.length,f);case 26:g=!1,t.next=20;break;case 29:t.next=35;break;case 31:t.prev=31,t.t0=t["catch"](18),b=!0,y=t.t0;case 35:if(t.prev=35,t.prev=36,!g||null==O.return){t.next=40;break}return t.next=40,O.return();case 40:if(t.prev=40,!b){t.next=43;break}throw y;case 43:return t.finish(40);case 44:return t.finish(35);case 45:return t.abrupt("return",m.filter((function(e){return void 0!==e})));case 46:return t.abrupt("return",void 0);case 47:case"end":return t.stop()}}),t,null,[[18,31,35,45],[36,,40,44]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"exportPersonSetToFile",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.exportToFile(t,n,(function(e){return e.id.toString()}),(function(e){return e.name}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"importPersonSetFromFile",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.importFromFile((function(e){return r.api.getPerson(e,t).then((function(e){return null===e||void 0===e?void 0:e.toPerson()}))}),n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"exportMovieSetToFile",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.exportToFile(t,n,(function(e){return e.id.toString()}),(function(e){return e.title}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"importMovieSetFromFile",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.importFromFile((function(e){return r.api.getMovie(e,t).then((function(e){return null===e||void 0===e?void 0:e.toMovie()}))}),n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();Ye.MAX_ACTIONS=5,Ye.ID_COLUMN="ID",Ye.UTF8_BOM="\ufeff";var He=new Ye,We=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.setService=He,e.progress=null,e}return Object(j["a"])(n,[{key:"selectedActors",get:function(){return ke.state.selectedActors},set:function(e){ke.mutations.setActors(e)}},{key:"lang",get:function(){return T.state.lang}},{key:"inProgress",get:function(){return null!==this.progress}},{key:"onImport",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.progress=[0,100],t={update:function(e,t){r.progress=[e,t]}},e.next=5,this.setService.importPersonSetFromFile(this.lang,t);case 5:n=e.sent,void 0!==n&&(this.selectedActors=n);case 7:return e.prev=7,this.progress=null,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onExport",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedActors.length>0&&this.setService.exportPersonSetToFile(this.selectedActors,"actors.csv");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(S["d"]);We=Object(_["a"])([Object(S["a"])({components:{ActorSelector:Ie,ModalProgress:W}})],We);var Ke=We,Xe=Ke,Je=Object(I["a"])(Xe,U,L,!1,null,"27fef91c",null),Qe=Je.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"alert alert-secondary my-3 mx-2",domProps:{innerHTML:e._s(e.$t("message.cache_warning"))}}),n("MovieSelector",{attrs:{setActions:!1},model:{value:e.selectedMovies,callback:function(t){e.selectedMovies=t},expression:"selectedMovies"}}),n("div",{staticClass:"my-3 text-center"},[e.inProgress?e._e():n("button",{staticClass:"btn btn-success mt-3 mb-1 d-inline-block",attrs:{type:"button"},on:{click:e.onImport}},[e._v(" "+e._s(e.$t("set.import"))+" ")]),n("br"),!e.inProgress&&e.selectedMovies.length>0?n("button",{staticClass:"btn btn-success mb-3 d-inline-block",attrs:{type:"button"},on:{click:e.onExport}},[e._v(" "+e._s(e.$t("set.export"))+" ")]):e._e()]),e.inProgress?n("ModalProgress",{attrs:{ready:e.progress[0],total:e.progress[1]}}):e._e()],1)},et=[],tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" "+e._s(e.$t("movie.movieName"))+": "),r("ItemSelector",{staticClass:"d-inline-block",staticStyle:{"max-width":"600px"},attrs:{suggest:e.suggest,changeDebounceTime:500,placeholder:e.$t("movie.placeholder"),emptyPlaceholder:e.$t("movie.emptyPlaceholder"),notFoundPlaceholder:e.$t("movie.notFoundPlaceholder")},on:{onSelect:e.onSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"d-inline-block align-middle mr-2"},[t.item.poster?r("img",{staticClass:"option__image",attrs:{src:t.item.poster,alt:t.item.title}}):r("img",{staticClass:"option__image",attrs:{src:n("071f"),alt:t.item.title}})]),r("div",{staticClass:"option__desc d-inline-block align-middle"},[r("div",{staticClass:"option__title font-weight-bold h3"},[e._v(e._s(t.item.title))]),r("div",{staticClass:"option__small text-muted"},[e._v(" "+e._s(e.$t("general.popularity"))+": "+e._s(t.item.popularity)+" ")])])]}}])}),r("div",{staticClass:"my-1 text-center"},[e.value.length>0?r("button",{staticClass:"btn btn-danger d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onClear}},[e._v(" "+e._s(e.$t("movie.clearList"))+" ")]):e._e(),e.setActions&&e.movieSet.length>0?r("button",{staticClass:"btn btn-success d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onAppendFromSet}},[e._v(" "+e._s(e.$t("movie.appendToList"))+" ")]):e._e(),e.setActions&&e.value.length>0?r("button",{staticClass:"btn btn-success d-inline-block mx-2",attrs:{type:"button"},on:{click:e.onAppendToSet}},[e._v(" "+e._s(e.$t("movie.appendToSet"))+" ")]):e._e()]),e.value.length>0?r("div",{staticClass:"my-3"},[r("h5",[e._v(e._s(e.$tc("movie.selectedNMovies",e.value.length))+":")]),r("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},e._l(e.value,(function(t){return r("MovieView",{key:t.id,staticStyle:{width:"200px"},attrs:{movie:t},on:{onDelete:e.onDelete}})})),1)]):e._e()],1)},nt=[],rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card m-2"},[r("button",{staticClass:"close position-absolute p-2",staticStyle:{top:"0",right:"0"},attrs:{type:"button"},on:{click:function(t){return e.onDelete(e.movie)}}},[r("span",[e._v("×")])]),r("div",[r("a",{attrs:{href:e.getUrl(e.movie.id),target:"_blank"}},[e.movie.poster?r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:e.movie.poster,alt:e.movie.title}}):r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:n("071f"),alt:e.movie.title}})])]),r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-text"},[e._v(e._s(e.movie.title))])])])},at=[],it=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"getUrl",value:function(e){return this.api.getMovieUrl(e,this.lang)}},{key:"onDelete",value:function(e){}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],it.prototype,"movie",void 0),Object(_["a"])([Object(S["b"])("onDelete")],it.prototype,"onDelete",null),it=Object(_["a"])([S["a"]],it);var st=it,ot=st,ct=(n("e03a"),Object(I["a"])(ot,rt,at,!1,null,"6e4a9bb9",null)),ut=ct.exports,lt=Object(R["createModule"])("movie-set",{namespaced:!0,state:{selectedMovies:[]},mutations:{setMovies:function(e,t){e.selectedMovies=t}}});lt.register(A);var pt=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"movieSet",get:function(){return lt.state.selectedMovies}},{key:"suggest",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.api.searchMovie(t,this.lang);case 4:return e.abrupt("return",e.sent.map((function(e){return e.toMovie()})).sort((function(e,t){return t.popularity-e.popularity})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"input",value:function(e){}},{key:"onSelect",value:function(e){var t=this.value.find((function(t){return t.id===e.id}));void 0===t&&this.input([].concat(Object(J["a"])(this.value),[e]))}},{key:"onDelete",value:function(e){var t=this.value.find((function(t){return t.id===e.id}));void 0!==t&&this.input(this.value.filter((function(t){return t.id!==e.id})))}},{key:"onClear",value:function(){this.value.length>0&&this.input([])}},{key:"onAppendFromSet",value:function(){var e,t=Object(J["a"])(this.value),n=Object(i["a"])(this.movieSet);try{var r=function(){var n=e.value,r=t.find((function(e){return e.id===n.id}));void 0===r&&t.push(n)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}this.value.length!==t.length&&this.input(t)}},{key:"onAppendToSet",value:function(){var e,t=Object(J["a"])(this.movieSet),n=Object(i["a"])(this.value);try{var r=function(){var n=e.value,r=t.find((function(e){return e.id===n.id}));void 0===r&&t.push(n)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}this.movieSet.length!==t.length&&lt.mutations.setMovies(t)}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],pt.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],pt.prototype,"setActions",void 0),Object(_["a"])([Object(S["b"])("input")],pt.prototype,"input",null),pt=Object(_["a"])([Object(S["a"])({components:{ItemSelector:Ae,MovieView:ut}})],pt);var vt=pt,dt=vt,ht=(n("a2eb"),Object(I["a"])(dt,tt,nt,!1,null,"94ca8dd4",null)),ft=ht.exports,mt=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.setService=He,e.progress=null,e}return Object(j["a"])(n,[{key:"selectedMovies",get:function(){return lt.state.selectedMovies},set:function(e){lt.mutations.setMovies(e)}},{key:"lang",get:function(){return T.state.lang}},{key:"inProgress",get:function(){return null!==this.progress}},{key:"onImport",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.progress=[0,100],t={update:function(e,t){r.progress=[e,t]}},e.next=5,this.setService.importMovieSetFromFile(this.lang,t);case 5:n=e.sent,void 0!==n&&(this.selectedMovies=n);case 7:return e.prev=7,this.progress=null,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onExport",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedMovies.length>0&&this.setService.exportMovieSetToFile(this.selectedMovies,"movies.csv");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(S["d"]);mt=Object(_["a"])([Object(S["a"])({components:{MovieSelector:ft,ModalProgress:W}})],mt);var gt=mt,bt=gt,yt=Object(I["a"])(bt,Ze,et,!1,null,"0a115096",null),Ot=yt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("MovieSelector",{attrs:{setActions:!0},model:{value:e.selectedMovies,callback:function(t){e.selectedMovies=t},expression:"selectedMovies"}}),!e.isSearching&&e.selectedMovies.length>0?n("div",[n("div",[n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.startSearch}},[e._v(" "+e._s(e.$t("general.startSearch"))+" ")])]),e.allRecommendations.length>0?n("ActorFilters",{attrs:{sortOptions:e.sortOptions},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),e.recommendations.length>0?n("PageableList",{attrs:{items:e.sortedRecommendations,pageSize:e.pageSize,page:e.currentPage},on:{onPageChange:e.onPageChange},scopedSlots:e._u([{key:"default",fn:function(t){return[n("PersonTileView",{staticClass:"mt-3",staticStyle:{width:"500px"},attrs:{actor:t.item[1]}},[n("div",[e._v(" "+e._s(e.$t("general.recommended"))+" "+e._s(e.$tc("general.nTimes",t.item[0].length))+" ")])])]}}],null,!1,1195532988)}):e._e()],1):e._e(),e.isSearching?n("ModalProgress",{attrs:{ready:e.progress[0],total:e.progress[1]}}):e._e()],1)},jt=[],xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"card mx-auto my-2",staticStyle:{"max-width":"40rem"}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[r("img",{staticClass:"mx-2",staticStyle:{height:"1.8rem"},attrs:{src:n("5ee4")}}),e._v(" "+e._s(e.$t("filter.filters"))+" ")]),r("div",{staticClass:"card-text"},[r("button",{staticClass:"btn btn-outline-danger my-3",class:{active:!e.excludeActorsFromSet},attrs:{type:"button"},on:{click:function(t){e.excludeActorsFromSet=!e.excludeActorsFromSet}}},[e._v(" "+e._s(e.excludeActorsFromSet?e.$t("actor.showAll"):e.$t("actor.excludeMovies"))+" ")])])])])]),r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"card mx-auto my-2",staticStyle:{"max-width":"40rem"}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[r("img",{staticClass:"mx-2",staticStyle:{height:"1.8rem"},attrs:{src:n("133b")}}),e._v(" "+e._s(e.$t("filter.sort"))+" ")]),r("div",{staticClass:"card-text"},[e._v(" "+e._s(e.$t("filter.sortBy"))+" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sort,expression:"sort"}],staticClass:"form-control form-control-sm d-inline ml-2",staticStyle:{"max-width":"10rem"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sort=t.target.multiple?n:n[0]}}},[r("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.$t("general.chooseOptions")))]),e._l(e.sortOptions,(function(t){return r("option",{key:t.id,domProps:{value:t.id,selected:t.id===e.sort}},[e._v(e._s(e.$t(t.n)))])}))],2)])])])])])},wt=[],_t=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"excludeActorsFromSet",get:function(){return this.value.excludeActorsFromSet},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{excludeActorsFromSet:e}))}},{key:"sort",get:function(){return this.value.sort},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{sort:e}))}},{key:"input",value:function(e){}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],_t.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],_t.prototype,"sortOptions",void 0),Object(_["a"])([Object(S["b"])("input")],_t.prototype,"input",null),_t=Object(_["a"])([S["a"]],_t);var St=_t,Ct=St,Mt=Object(I["a"])(Ct,xt,wt,!1,null,"130487e0",null),Rt=Mt.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mx-2"},[r("div",[r("a",{attrs:{href:e.getUrl(e.actor.id),target:"_blank"}},[e.actor.poster?r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:e.actor.poster,alt:e.actor.title}}):r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:n("fa1d"),alt:e.actor.title}})])]),r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.actor.name))]),r("div",[e._v(" "+e._s(e.$t("general.popularity"))+": "),r("StarRating",{attrs:{count:10,range:50,score:e.actor.popularity}}),e._v(" ("+e._s(e.actor.popularity)+") ")],1),e._t("default"),r("div",{staticClass:"my-2"},[e.isinActorSet?r("button",{staticClass:"btn btn-outline-danger my-1 mx-auto d-block",attrs:{type:"button"},on:{click:e.removeFromSet}},[e._v(" "+e._s(e.$t("set.remove"))+" ")]):r("button",{staticClass:"btn btn-outline-primary my-1 mx-auto d-block",attrs:{type:"button"},on:{click:e.addToSet}},[e._v(" "+e._s(e.$t("set.add"))+" ")])])],2)])},At=[],Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-inline",attrs:{title:e.score}},e._l(e.count,(function(t){return r("span",{key:t},[t<=e.checkedStars?r("img",{staticClass:"star",attrs:{src:n("7c96")}}):r("img",{staticClass:"star",attrs:{src:n("42a8")}})])})),0)},$t=[],Ft=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"checkedStars",get:function(){return this.score/this.range*this.count}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],Ft.prototype,"count",void 0),Object(_["a"])([Object(S["c"])()],Ft.prototype,"range",void 0),Object(_["a"])([Object(S["c"])()],Ft.prototype,"score",void 0),Ft=Object(_["a"])([S["a"]],Ft);var Dt=Ft,It=Dt,Et=(n("7b8b"),Object(I["a"])(It,Tt,$t,!1,null,"d5b3ddd2",null)),Nt=Et.exports,Ut=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"actorSet",get:function(){return ke.state.selectedActors}},{key:"isinActorSet",get:function(){var e=this,t=this.actorSet.find((function(t){return t.id===e.actor.id}));return void 0!==t}},{key:"addToSet",value:function(){this.isinActorSet||ke.mutations.setActors([].concat(Object(J["a"])(this.actorSet),[this.actor]))}},{key:"removeFromSet",value:function(){var e=this;this.isinActorSet&&ke.mutations.setActors(this.actorSet.filter((function(t){return t.id!==e.actor.id})))}},{key:"getUrl",value:function(e){return this.api.getPersonUrl(e,this.lang)}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],Ut.prototype,"actor",void 0),Ut=Object(_["a"])([Object(S["a"])({components:{StarRating:Nt}})],Ut);var Lt=Ut,Bt=Lt,Gt=(n("07cb"),Object(I["a"])(Bt,Pt,At,!1,null,"09a4569a",null)),zt=Gt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items.length>0?n("div",[n("div",{staticClass:"my-2"},[n("Paginator",{staticClass:"d-inline-block m-auto",attrs:{displayCount:5,pageCount:Math.ceil(e.items.length/e.pageSize),currentPage:e.page},on:{onChange:e.onPageChange}})],1),n("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},[e._l(e.range(e.rangeStart,e.rangeEnd),(function(t){return e._t("default",null,{item:e.items[t]})}))],2),n("div",{staticClass:"my-2"},[n("Paginator",{staticClass:"d-inline-block m-auto",attrs:{displayCount:5,pageCount:Math.ceil(e.items.length/e.pageSize),currentPage:e.page},on:{onChange:e.onPageChange}})],1)]):e._e()},Vt=[],Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("ul",{staticClass:"pagination"},[e.displayCount<e.pageCount?n("li",{staticClass:"page-item",class:{disabled:1===e.currentPage}},[1===e.currentPage?n("span",{staticClass:"page-link"},[e._v(e._s(e.$t("paginator.previous")))]):n("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onPrev()}}},[e._v(e._s(e.$t("paginator.previous")))])]):e._e(),e._l(e.range(e.rangeStart,e.rangeEnd),(function(t){return n("li",{key:t,staticClass:"page-item",class:{active:e.currentPage===t}},[e.currentPage===t?n("span",{staticClass:"page-link"},[e._v(e._s(t))]):n("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.onChange(t)}}},[e._v(e._s(t))])])})),e.displayCount<e.pageCount?n("li",{staticClass:"page-item",class:{disabled:e.currentPage===e.pageCount}},[e.currentPage===e.pageCount?n("span",{staticClass:"page-link"},[e._v(e._s(e.$t("paginator.next")))]):n("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onNext()}}},[e._v(e._s(e.$t("paginator.next")))])]):e._e()],2)])},Ht=[],Wt=(n("b65f"),function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"range",value:function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n}},{key:"rangeStart",get:function(){var e=this.displayCount/2,t=Math.trunc(e),n=Math.max(this.currentPage-t,1),r=Math.max(this.pageCount-this.displayCount+1,1);return Math.min(n,r)}},{key:"rangeEnd",get:function(){return this.rangeStart+Math.min(this.displayCount,this.pageCount)-1}},{key:"onPrev",value:function(){this.currentPage>1&&this.$emit("onChange",this.currentPage-1)}},{key:"onNext",value:function(){this.currentPage<this.pageCount&&this.$emit("onChange",this.currentPage+1)}},{key:"onChange",value:function(e){this.currentPage!==e&&this.$emit("onChange",e)}}]),n}(S["d"]));Object(_["a"])([Object(S["c"])()],Wt.prototype,"displayCount",void 0),Object(_["a"])([Object(S["c"])()],Wt.prototype,"pageCount",void 0),Object(_["a"])([Object(S["c"])()],Wt.prototype,"currentPage",void 0),Wt=Object(_["a"])([S["a"]],Wt);var Kt=Wt,Xt=Kt,Jt=Object(I["a"])(Xt,Yt,Ht,!1,null,"3301fa54",null),Qt=Jt.exports,Zt=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"onPageChange",value:function(e){}},{key:"rangeStart",get:function(){return this.pageSize*(this.page-1)}},{key:"rangeEnd",get:function(){return Math.min(this.items.length,this.pageSize*this.page)-1}},{key:"range",value:function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],Zt.prototype,"items",void 0),Object(_["a"])([Object(S["c"])()],Zt.prototype,"pageSize",void 0),Object(_["a"])([Object(S["c"])()],Zt.prototype,"page",void 0),Object(_["a"])([Object(S["b"])("onPageChange")],Zt.prototype,"onPageChange",null),Zt=Object(_["a"])([Object(S["a"])({components:{Paginator:Qt}})],Zt);var en=Zt,tn=en,nn=Object(I["a"])(tn,qt,Vt,!1,null,"147ff79e",null),rn=nn.exports,an=regeneratorRuntime.mark(sn);function sn(e,t){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.length===t.length){r.next=2;break}throw new Error("Arrays must have same length");case 2:n=0;case 3:if(!(n<e.length)){r.next=9;break}return r.next=6,[e[n],t[n]];case 6:++n,r.next=3;break;case 9:case"end":return r.stop()}}),an)}var on=function(){function e(){Object(k["a"])(this,e),this.api=de}return Object(j["a"])(e,[{key:"recommendMoviesByMovies",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return o.api.getRecommendations(e.id,n)},e.next=3,this.recommend(Object(J["a"])(t),a,(function(e){return e.id}),r);case 3:return i=e.sent,s=new Set(Object(J["a"])(t).map((function(e){return e.id}))),e.abrupt("return",i.filter((function(e){return!s.has(e[1].id)})).map((function(e){return[e[0],e[1].toMovie()]})));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"recommendMoviesByActors",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return s.api.searchMoviesByPerson(e.id,n)},e.next=3,this.recommend(Object(J["a"])(t),a,(function(e){return e.id}),r);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return[e[0],e[1].toMovie()]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"recommendActorsByMovies",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return s.api.searchPersonsByMovie(e.id,n)},e.next=3,this.recommend(Object(J["a"])(t),a,(function(e){return e.id}),r);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return[e[0],e[1].toPerson()]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"recommendMoviesFromCollection",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return o.api.getCollectionByMovie(e.id,n).then((function(e){return void 0!==e?o.api.getCollectionMovies(e,n):[]}))},e.next=3,this.recommend(Object(J["a"])(t),a,(function(e){return e.id}),r);case 3:return i=e.sent,s=new Set(Object(J["a"])(t).map((function(e){return e.id}))),e.abrupt("return",i.filter((function(e){return!s.has(e[1].id)})).map((function(e){return[e[0],e[1].toMovie()]})));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"recommend",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a,s){var c,u,l,p,v,d,h,f,m,g,b,y,O,k,j,x,w,_,S,C;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c=n.map((function(e){return function(){return r(e)}})),u=c.length,s.update(0,u),l=[],p=!1,v=!1,t.prev=6,h=Object(Ee["a"])(ae(c,e.MAX_ACTIONS));case 8:return t.next=10,h.next();case 10:if(!(p=!(f=t.sent).done)){t.next=17;break}m=f.value,l.push.apply(l,Object(J["a"])(m)),s.update(l.length,u);case 14:p=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](6),v=!0,d=t.t0;case 23:if(t.prev=23,t.prev=24,!p||null==h.return){t.next=28;break}return t.next=28,h.return();case 28:if(t.prev=28,!v){t.next=31;break}throw d;case 31:return t.finish(28);case 32:return t.finish(23);case 33:g=new Map,b=Object(i["a"])(sn(l,n));try{for(b.s();!(y=b.n()).done;){O=Object(o["a"])(y.value,2),k=O[0],j=O[1],x=Object(i["a"])(k);try{for(x.s();!(w=x.n()).done;)_=w.value,S=a(_),C=g.get(S),C?C[0].push(j):g.set(S,[[j],_])}catch(M){x.e(M)}finally{x.f()}}}catch(M){b.e(M)}finally{b.f()}return t.abrupt("return",Object(J["a"])(g.values()));case 37:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])})));function n(e,n,r,a){return t.apply(this,arguments)}return n}()}]),e}();on.MAX_ACTIONS=5;var cn=new on,un=Object(R["createModule"])("actors-by-movies",{namespaced:!0,state:{selectedMovies:[],actors:[]},mutations:{setMovies:function(e,t){e.selectedMovies=t},recommend:function(e,t){e.actors=t}}});un.register(A);n("1276"),n("8a79");function ln(e,t,n){return e===t?0:void 0!==e&&void 0===t||null!==e&&null===t||e>t?n:-1*n}function pn(e,t){var n=t.split("."),r=e;return n.every((function(e){return void 0!==r&&null!==r&&(r=r[e],!0)})),r}function vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?e.sort((function(e,t){for(var r=0,a=0;0===r&&a<n.length;++a){var i=n[a].endsWith(":desc")?-1:1,s=n[a].replace(/:desc$/i,"").replace(/:asc$/i,""),o=pn(e,s),c=pn(t,s);r=ln(o,c,i)}return r})):e}var dn=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.recommender=cn,e.progress=null,e.pageSize=9,e.currentPage=1,e.sortOptions=[{id:"popularity",n:"general.popularity"}],e.filter={excludeActorsFromSet:!1,sort:e.sortOptions[0].id},e}return Object(j["a"])(n,[{key:"selectedMovies",get:function(){return un.state.selectedMovies},set:function(e){un.mutations.setMovies(e)}},{key:"allRecommendations",get:function(){return un.state.actors},set:function(e){un.mutations.recommend(e),this.currentPage=1,this.resetFilter()}},{key:"recommendations",get:function(){var e=this.allRecommendations;if(0===e.length)return e;if(this.filter.excludeActorsFromSet&&this.actorSet.length>0){var t=new Set(this.actorSet.map((function(e){return e.id})));e=e.filter((function(e){return!t.has(e[1].id)}))}return e}},{key:"sortedRecommendations",get:function(){return vn(Object(J["a"])(this.recommendations),"0.length:desc","1.".concat(this.filter.sort,":desc"))}},{key:"lang",get:function(){return T.state.lang}},{key:"actorSet",get:function(){return ke.state.selectedActors}},{key:"isSearching",get:function(){return null!==this.progress}},{key:"onPageChange",value:function(e){this.currentPage=e}},{key:"startSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isSearching){e.next=10;break}return e.prev=1,this.progress=[0,100],t={update:function(e,t){n.progress=[e,t]}},e.next=6,this.recommender.recommendActorsByMovies(new Set(this.selectedMovies),this.lang,t);case 6:this.allRecommendations=e.sent;case 7:return e.prev=7,this.progress=null,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetFilter",value:function(){this.filter.excludeActorsFromSet=!1}}]),n}(S["d"]);dn=Object(_["a"])([Object(S["a"])({components:{MovieSelector:ft,PersonTileView:zt,PageableList:rn,ActorFilters:Rt,ModalProgress:W}})],dn);var hn=dn,fn=hn,mn=(n("22ee"),Object(I["a"])(fn,kt,jt,!1,null,"da71aee6",null)),gn=mn.exports,bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ActorSelector",{attrs:{setActions:!0},model:{value:e.selectedActors,callback:function(t){e.selectedActors=t},expression:"selectedActors"}}),!e.isSearching&&e.selectedActors.length>0?n("div",[n("div",[n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.startSearch}},[e._v(" "+e._s(e.$t("general.startSearch"))+" ")])]),e.allRecommendations.length>0?n("MovieFilters",{attrs:{genres:e.genres,yearRange:e.yearRange,sortOptions:e.sortOptions},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),e.recommendations.length>0?n("PageableList",{attrs:{items:e.sortedRecommendations,pageSize:e.pageSize,page:e.currentPage},on:{onPageChange:e.onPageChange},scopedSlots:e._u([{key:"default",fn:function(t){return[n("MovieTileView",{staticClass:"mt-3",staticStyle:{width:"500px"},attrs:{movie:t.item[1]}},[n("div",[e._v(" "+e._s(e.$tc("actor.nActors",t.item[0].length))+": "+e._s(t.item[0].map((function(e){return e.name})).slice(0,4).join(", "))+" "),t.item[0].length>4?n("span",[e._v(e._s(e.$t("general.andOthers")))]):e._e()])])]}}],null,!1,3973475049)}):e._e()],1):e._e(),e.isSearching?n("ModalProgress",{attrs:{ready:e.progress[0],total:e.progress[1]}}):e._e()],1)},yn=[],On=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"card mx-auto my-2",staticStyle:{"max-width":"40rem"}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[r("img",{staticClass:"mx-2",staticStyle:{height:"1.8rem"},attrs:{src:n("5ee4")}}),e._v(" "+e._s(e.$t("filter.filters"))+" ")]),r("div",{staticClass:"card-text"},[r("button",{staticClass:"btn btn-outline-danger my-3",class:{active:!e.excludeMoviesFromSet},attrs:{type:"button"},on:{click:function(t){e.excludeMoviesFromSet=!e.excludeMoviesFromSet}}},[e._v(" "+e._s(e.excludeMoviesFromSet?e.$t("movie.showAll"):e.$t("movie.excludeMovies"))+" ")]),r("br"),r("TagSelector",{attrs:{items:e.genres,placeholder:e.$t("filter.chooseGenresToInclude"),toName:e.genreToName},model:{value:e.includedGenres,callback:function(t){e.includedGenres=t},expression:"includedGenres"}}),r("br"),r("TagSelector",{staticClass:"excluded-tags",attrs:{items:e.genres,placeholder:e.$t("filter.chooseGenresToExclude"),toName:e.genreToName},model:{value:e.excludedGenres,callback:function(t){e.excludedGenres=t},expression:"excludedGenres"}}),r("br"),r("YearRangePicker",{attrs:{min:e.yearRange[0],max:e.yearRange[1]},model:{value:e.years,callback:function(t){e.years=t},expression:"years"}})],1)])])]),r("div",{staticClass:"col-md-6 col-12"},[r("div",{staticClass:"card mx-auto my-2",staticStyle:{"max-width":"40rem"}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[r("img",{staticClass:"mx-2",staticStyle:{height:"1.8rem"},attrs:{src:n("133b")}}),e._v(" "+e._s(e.$t("filter.sort"))+" ")]),r("div",{staticClass:"card-text"},[e._v(" "+e._s(e.$t("filter.sortBy"))+" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sort,expression:"sort"}],staticClass:"form-control form-control-sm d-inline ml-2",staticStyle:{"max-width":"10rem"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sort=t.target.multiple?n:n[0]}}},[r("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.$t("general.chooseOptions")))]),e._l(e.sortOptions,(function(t){return r("option",{key:t.id,domProps:{value:t.id,selected:t.id===e.sort}},[e._v(e._s(e.$t(t.n)))])}))],2)])])])])])},kn=[],jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("multiselect",{attrs:{customLabel:e.toName,taggable:!0,showLabels:!1,multiple:!0,options:e.items,placeholder:e.placeholder,value:e.value},on:{select:e.onSelect,remove:e.onRemove}})},xn=[],wn=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"input",value:function(e){}},{key:"onSelect",value:function(e){this.input([].concat(Object(J["a"])(this.value),[e]))}},{key:"onRemove",value:function(e){this.input(this.value.filter((function(t){return t!==e})))}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],wn.prototype,"placeholder",void 0),Object(_["a"])([Object(S["c"])()],wn.prototype,"items",void 0),Object(_["a"])([Object(S["c"])()],wn.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],wn.prototype,"toName",void 0),Object(_["a"])([Object(S["b"])("input")],wn.prototype,"input",null),wn=Object(_["a"])([Object(S["a"])({components:{Multiselect:Se.a}})],wn);var _n,Sn=wn,Cn=Sn,Mn=Object(I["a"])(Cn,jn,xn,!1,null,"7017935d",null),Rn=Mn.exports,Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-center"},[n("label",[e._v(e._s(e.$t("filter.year")))]),n("input",{staticClass:"form-control d-inline-block",class:{"is-invalid":!e.isStartValid},staticStyle:{width:"6rem"},attrs:{type:"text",placeholder:e.min.toString()},domProps:{value:e.start},on:{input:e.onStartChange}}),e._v(" - "),n("input",{staticClass:"form-control d-inline-block",class:{"is-invalid":!e.isEndValid},staticStyle:{width:"6rem"},attrs:{type:"text",placeholder:e.max.toString()},domProps:{value:e.end},on:{input:e.onEndChange}})]),e.isStartValid&&e.isEndValid?e._e():n("div",{staticClass:"invalid-feedback d-block"},[e._v(" "+e._s(e.$t("filter.validYearRange",{min:e.min,max:e.max}))+" ")])])},An=[],Tn=(n("498a"),_n=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"created",value:function(){if(null===this.value){var e=[null,null];this.start=e[0],this.end=e[1]}else{var t=[this.value[0]?this.value[0]:null,this.value[1]?this.value[1]:null];this.start=t[0],this.end=t[1]}var n=this.valid(),r=Object(o["a"])(n,2);this.isStartValid=r[0],this.isEndValid=r[1]}},{key:"onStartChange",value:function(e){var t=_n.normalizeInt(e.target.value);void 0!==t&&(this.start=t,this.onRangeChange()),this.$forceUpdate()}},{key:"onEndChange",value:function(e){var t=_n.normalizeInt(e.target.value);void 0!==t&&(this.end=t,this.onRangeChange()),this.$forceUpdate()}},{key:"onRangeChange",value:function(){var e=this.valid(),t=Object(o["a"])(e,2);this.isStartValid=t[0],this.isEndValid=t[1],this.isStartValid&&this.isEndValid&&(null===this.start&&null===this.end?this.input(null):this.input([this.start,this.end]))}},{key:"valid",value:function(){var e=this.start,t=this.end,n=null===e||e>=this.min&&e<=this.max,r=null===t||t>=this.min&&t<=this.max,a=null===e||null===t||e<=t;return[n&&a,r&&a]}},{key:"input",value:function(e){}}],[{key:"normalizeInt",value:function(e){return e=e.trim(),""===e?null:/^[0-9]+$/.test(e)?parseInt(e.trim(),10):void 0}}]),n}(S["d"]));Object(_["a"])([Object(S["c"])()],Tn.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],Tn.prototype,"min",void 0),Object(_["a"])([Object(S["c"])()],Tn.prototype,"max",void 0),Object(_["a"])([Object(S["b"])("input")],Tn.prototype,"input",null),Tn=_n=Object(_["a"])([S["a"]],Tn);var $n=Tn,Fn=$n,Dn=Object(I["a"])(Fn,Pn,An,!1,null,"0933839d",null),In=Dn.exports,En=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(k["a"])(this,n),t.apply(this,arguments)}return Object(j["a"])(n,[{key:"excludeMoviesFromSet",get:function(){return this.value.excludeMoviesFromSet},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{excludeMoviesFromSet:e}))}},{key:"includedGenres",get:function(){return this.value.includedGenres},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{includedGenres:e}))}},{key:"excludedGenres",get:function(){return this.value.excludedGenres},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{excludedGenres:e}))}},{key:"years",get:function(){return this.value.years},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{years:e}))}},{key:"sort",get:function(){return this.value.sort},set:function(e){this.input(Object(c["a"])(Object(c["a"])({},this.value),{},{sort:e}))}},{key:"genreToName",value:function(e){return e.name}},{key:"input",value:function(e){}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],En.prototype,"value",void 0),Object(_["a"])([Object(S["c"])()],En.prototype,"genres",void 0),Object(_["a"])([Object(S["c"])()],En.prototype,"sortOptions",void 0),Object(_["a"])([Object(S["c"])()],En.prototype,"yearRange",void 0),Object(_["a"])([Object(S["b"])("input")],En.prototype,"input",null),En=Object(_["a"])([Object(S["a"])({components:{TagSelector:Rn,YearRangePicker:In}})],En);var Nn=En,Un=Nn,Ln=(n("4b22"),Object(I["a"])(Un,On,kn,!1,null,null,null)),Bn=Ln.exports,Gn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mx-2"},[r("div",[r("a",{attrs:{href:e.getUrl(e.movie.id),target:"_blank"}},[e.movie.poster?r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:e.movie.poster,alt:e.movie.title}}):r("img",{staticClass:"card-img-top m-auto d-inline-block w-auto",attrs:{src:n("071f"),alt:e.movie.title}})])]),r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.movie.title))]),e.showDetails?r("p",{staticClass:"card-text"},[e._v(e._s(e.movie.overview))]):r("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.showDetails=!0}}},[e._v(" "+e._s(e.$t("general.showDetails"))+" ")]),e.movie.releaseDate?r("div",[e._v(" "+e._s(e.$t("general.year"))+": ("+e._s(e.movie.releaseDate.getFullYear())+") ")]):e._e(),r("div",[e._v(" "+e._s(e.$t("movie.genres"))+": "),e._l(e.movie.genres,(function(t){return r("span",{key:t.id,staticClass:"badge badge-secondary mr-1"},[e._v(e._s(t.name))])}))],2),r("div",[e._v(" "+e._s(e.$t("general.vote"))+": "),r("StarRating",{attrs:{count:10,range:10,score:e.movie.voteAverage}}),e._v(" ("+e._s(e.movie.voteAverage)+") ")],1),r("div",[e._v(" "+e._s(e.$t("general.popularity"))+": "),r("StarRating",{attrs:{count:10,range:50,score:e.movie.popularity}}),e._v(" ("+e._s(e.movie.popularity)+") ")],1),e._t("default"),r("div",{staticClass:"my-2"},[e.isinMovieSet?r("button",{staticClass:"btn btn-outline-danger my-1 mx-auto d-block",attrs:{type:"button"},on:{click:e.removeFromSet}},[e._v(" "+e._s(e.$t("set.remove"))+" ")]):r("button",{staticClass:"btn btn-outline-primary my-1 mx-auto d-block",attrs:{type:"button"},on:{click:e.addToSet}},[e._v(" "+e._s(e.$t("set.add"))+" ")]),r("a",{staticClass:"btn btn-outline-primary my-1",attrs:{href:e.getTrailerUrl(e.movie),target:"_blank"}},[e._v(" "+e._s(e.$t("movie.findTrailer"))+" ")])])],2)])},zn=[],qn=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.api=de,e.showDetails=!1,e}return Object(j["a"])(n,[{key:"lang",get:function(){return T.state.lang}},{key:"movieSet",get:function(){return lt.state.selectedMovies}},{key:"isinMovieSet",get:function(){var e=this,t=this.movieSet.find((function(t){return t.id===e.movie.id}));return void 0!==t}},{key:"addToSet",value:function(){this.isinMovieSet||lt.mutations.setMovies([].concat(Object(J["a"])(this.movieSet),[this.movie]))}},{key:"removeFromSet",value:function(){var e=this;this.isinMovieSet&&lt.mutations.setMovies(this.movieSet.filter((function(t){return t.id!==e.movie.id})))}},{key:"getUrl",value:function(e){return this.api.getMovieUrl(e,this.lang)}},{key:"getTrailerUrl",value:function(e){var t="".concat(e.title," ").concat(this.$t("movie.trailer"));return"https://youtube.com/results?search_query=".concat(encodeURIComponent(t))}}]),n}(S["d"]);Object(_["a"])([Object(S["c"])()],qn.prototype,"movie",void 0),qn=Object(_["a"])([Object(S["a"])({components:{StarRating:Nt}})],qn);var Vn=qn,Yn=Vn,Hn=(n("9292"),Object(I["a"])(Yn,Gn,zn,!1,null,"3aaf3154",null)),Wn=Hn.exports,Kn=Object(R["createModule"])("movies-by-actors",{namespaced:!0,state:{selectedActors:[],movies:[]},mutations:{setActors:function(e,t){e.selectedActors=t},recommend:function(e,t){e.movies=t}}});Kn.register(A);var Xn=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.recommender=cn,e.progress=null,e.pageSize=9,e.currentPage=1,e.sortOptions=[{id:"popularity",n:"general.popularity"},{id:"voteAverage",n:"general.vote"}],e.filter={excludeMoviesFromSet:!1,includedGenres:[],excludedGenres:[],years:null,sort:e.sortOptions[0].id},e}return Object(j["a"])(n,[{key:"selectedActors",get:function(){return Kn.state.selectedActors},set:function(e){Kn.mutations.setActors(e)}},{key:"allRecommendations",get:function(){return Kn.state.movies},set:function(e){Kn.mutations.recommend(e),this.currentPage=1,this.resetFilter()}},{key:"recommendations",get:function(){var e=this.allRecommendations;if(0===e.length)return e;if(this.filter.excludeMoviesFromSet&&this.movieSet.length>0){var t=new Set(this.movieSet.map((function(e){return e.id})));e=e.filter((function(e){return!t.has(e[1].id)}))}if(this.filter.includedGenres.length>0){var n=new Set(this.filter.includedGenres.map((function(e){return e.id})));e=e.filter((function(e){return e[1].genres.some((function(e){return n.has(e.id)}))}))}if(this.filter.excludedGenres.length>0){var r=new Set(this.filter.excludedGenres.map((function(e){return e.id})));e=e.filter((function(e){return e[1].genres.every((function(e){return!r.has(e.id)}))}))}if(null!==this.filter.years){var a=Object(o["a"])(this.filter.years,2),i=a[0],s=a[1],c=function(e){return(null===i||e.getFullYear()>=i)&&(null===s||e.getFullYear()<=s)};e=e.filter((function(e){return!e[1].releaseDate||c(e[1].releaseDate)}))}return e}},{key:"sortedRecommendations",get:function(){return vn(Object(J["a"])(this.recommendations),"0.length:desc","1.".concat(this.filter.sort,":desc"))}},{key:"genres",get:function(){var e,t=new Map,n=Object(i["a"])(this.allRecommendations);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,s=Object(i["a"])(a[1].genres);try{for(s.s();!(r=s.n()).done;){var o=r.value;t.set(o.id,o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return Object(J["a"])(t.values()).sort((function(e,t){return e.name.localeCompare(t.name)}))}},{key:"yearRange",get:function(){var e,t=1400,n=9e3,r=Object(i["a"])(this.allRecommendations);try{for(r.s();!(e=r.n()).done;){var a,s=e.value,o=null===(a=s[1].releaseDate)||void 0===a?void 0:a.getFullYear();void 0!==o&&(t=o>t?o:t,n=o<n?o:n)}}catch(c){r.e(c)}finally{r.f()}return[n,t]}},{key:"lang",get:function(){return T.state.lang}},{key:"movieSet",get:function(){return lt.state.selectedMovies}},{key:"isSearching",get:function(){return null!==this.progress}},{key:"onPageChange",value:function(e){this.currentPage=e}},{key:"startSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isSearching){e.next=10;break}return e.prev=1,this.progress=[0,100],t={update:function(e,t){n.progress=[e,t]}},e.next=6,this.recommender.recommendMoviesByActors(new Set(this.selectedActors),this.lang,t);case 6:this.allRecommendations=e.sent;case 7:return e.prev=7,this.progress=null,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetFilter",value:function(){this.filter.excludeMoviesFromSet=!1,this.filter.includedGenres=[],this.filter.excludedGenres=[],this.filter.years=null}}]),n}(S["d"]);Xn=Object(_["a"])([Object(S["a"])({components:{ActorSelector:Ie,MovieTileView:Wn,PageableList:rn,MovieFilters:Bn,ModalProgress:W}})],Xn);var Jn=Xn,Qn=Jn,Zn=Object(I["a"])(Qn,bn,yn,!1,null,"ab93ce2c",null),er=Zn.exports,tr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("MovieSelector",{attrs:{setActions:!0},model:{value:e.selectedMovies,callback:function(t){e.selectedMovies=t},expression:"selectedMovies"}}),!e.isSearching&&e.selectedMovies.length>0?n("div",[n("div",[n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.recommendationSearch}},[e._v(" "+e._s(e.$t("general.searchRecommendations"))+" ")]),n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.collectionSearch}},[e._v(" "+e._s(e.$t("general.searchSeries"))+" ")]),n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.popularSearch}},[e._v(" "+e._s(e.$t("general.searchPopular"))+" ")]),n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.watchTogetherSearch}},[e._v(" "+e._s(e.$t("general.searchWatchTogether"))+" ")]),n("button",{staticClass:"btn btn-success m-3",attrs:{type:"button"},on:{click:e.similarSearch}},[e._v(" "+e._s(e.$t("general.searchMayLike"))+" ")])]),e.allRecommendations.length>0?n("MovieFilters",{attrs:{genres:e.genres,yearRange:e.yearRange,sortOptions:e.sortOptions},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),e.recommendations.length>0?n("PageableList",{attrs:{items:e.sortedRecommendations,pageSize:e.pageSize,page:e.currentPage},on:{onPageChange:e.onPageChange},scopedSlots:e._u([{key:"default",fn:function(t){return[n("MovieTileView",{staticClass:"mt-3",staticStyle:{width:"500px"},attrs:{movie:t.item[1]}},[n("div",[e._v(" "+e._s(e.$t("general.recommended"))+" "+e._s(e.$tc("general.nTimes",t.item[0].length))+" ")])])]}}],null,!1,4157272002)}):e._e()],1):e._e(),e.isSearching?n("ModalProgress",{attrs:{ready:e.progress[0],total:e.progress[1]}}):e._e()],1)},nr=[],rr=function e(t,n,r,a){Object(k["a"])(this,e),this.id=t,this.name=n,this.year=r,this.genre=a},ar=function e(t,n,r,a){Object(k["a"])(this,e),this.movieId=t,this.userId=n,this.rating=r,this.date=a},ir=function(){function e(){Object(k["a"])(this,e),this.ratings=null,this.movies=null}return Object(j["a"])(e,[{key:"getRatings",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===this.ratings&&(this.ratings=this.requestRatings()),e.abrupt("return",this.ratings);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRatingsByMovies",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Map,t.t0=i["a"],t.next=4,this.getRatings();case 4:t.t1=t.sent,r=(0,t.t0)(t.t1);try{for(r.s();!(a=r.n()).done;)s=a.value,e.merge(n,s.movieId,s)}catch(o){r.e(o)}finally{r.f()}return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getRatingsByUsers",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Map,t.t0=i["a"],t.next=4,this.getRatings();case 4:t.t1=t.sent,r=(0,t.t0)(t.t1);try{for(r.s();!(a=r.n()).done;)s=a.value,e.merge(n,s.userId,s)}catch(o){r.e(o)}finally{r.f()}return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getMovies",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===this.movies&&(this.movies=this.requestMovies()),e.abrupt("return",this.movies);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestRatings",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,o,c,u,l,p,v,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],t.next=3,fetch("".concat(e.apiHost,"/ratings.dat"));case 3:return r=t.sent,t.next=6,r.text();case 6:a=t.sent,s=Object(i["a"])(a.split("\n"));try{for(s.s();!(o=s.n()).done;)c=o.value,u=c.split("::"),4===u.length&&(l=parseInt(u[0],10),p=parseInt(u[1],10),v=parseInt(u[2],10),d=new Date(1e3*parseInt(u[3],10)),n.push(new ar(p,l,v,d)))}catch(h){s.e(h)}finally{s.f()}return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{key:"requestMovies",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,o,c,u,l,p,v,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Map,t.next=3,fetch("".concat(e.apiHost,"/movies.dat"));case 3:return r=t.sent,t.next=6,r.text();case 6:a=t.sent,s=Object(i["a"])(a.split("\n"));try{for(s.s();!(o=s.n()).done;)c=o.value,u=c.split("::"),3===u.length&&(l=parseInt(u[0],10),p=u[1].substr(0,u[1].length-7).replaceAll("&amp;","&").replaceAll("&x27;","'").replaceAll("&quot;",'"'),v=parseInt(u[1].substr(u[1].length-5,4),10),d=0===u[2].length?[]:u[2].split("|"),n.set(l,new rr(l,p,v,d)))}catch(h){s.e(h)}finally{s.f()}return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}],[{key:"cached",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",n());case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"merge",value:function(e,t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])}}]),e}();ir.apiHost="https://raw.githubusercontent.com/sidooms/MovieTweetings/master/latest";var sr=new ir,or=function(){function e(){Object(k["a"])(this,e),this.api=de,this.movies=new Map,this.mtMovies=new Map}return Object(j["a"])(e,[{key:"toTMDB",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r){var a,i,s,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===this.movies.get(r)&&this.movies.set(r,new Map),s=null===(a=this.movies.get(r))||void 0===a?void 0:a.get(n.id),void 0===s){t.next=4;break}return t.abrupt("return",s);case 4:if(o=null===(i=Object(J["a"])(this.movies.values()).map((function(e){return e.get(n.id)})).find((function(e){return void 0!==e})))||void 0===i?void 0:i.id,void 0===o){t.next=12;break}return t.next=8,de.getMovie(o,r);case 8:if(c=t.sent,void 0!==c){t.next=11;break}throw new Error("Movie ".concat(o," does not exist in TMDB database!"));case 11:return t.abrupt("return",this.cacheAndReturn(n,r,c.toMovie()));case 12:return t.next=14,this.api.searchMovie(n.name,r);case 14:if(u=t.sent,u.length>1&&n.year&&(u=u.filter((function(e){return e.releaseDate&&e.releaseDate.getFullYear()===n.year}))),u.length>1&&(u=u.filter((function(e){var t;return(null===(t=e.originalTitle)||void 0===t?void 0:t.toUpperCase())===n.name.toUpperCase()}))),1!==u.length){t.next=19;break}return t.abrupt("return",this.cacheAndReturn(n,r,u[0].toMovie()));case 19:return console.warn("".concat(u.length," movies were found by ").concat(n.name," query in TMDB")),t.abrupt("return",this.cacheAndReturn(n,r,e.toMovie(n)));case 21:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"toMT",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t,n){var a,s,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.mtMovies.get(t.id),void 0===a){e.next=3;break}return e.abrupt("return",a||void 0);case 3:return e.next=5,this.api.getMovie(t.id,r.EN);case 5:s=e.sent.title.toUpperCase(),c=Object(i["a"])(n),e.prev=7,c.s();case 9:if((u=c.n()).done){e.next=18;break}if(l=u.value,s!==l.name.toUpperCase()){e.next=16;break}if(void 0===l.year||void 0===t.releaseDate||l.year!==t.releaseDate.getFullYear()){e.next=15;break}return this.mtMovies.set(t.id,l.id),e.abrupt("return",l.id);case 15:o=l.id;case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](7),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:if(void 0===o){e.next=30;break}return console.warn('"'.concat(t.title,'" movie has bad date in TMDB or MT')),this.mtMovies.set(t.id,o),e.abrupt("return",o);case 30:return console.warn('"'.concat(t.title,'"/"').concat(s,'" was not found in MT collection')),e.abrupt("return",void 0);case 32:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"cacheAndReturn",value:function(e,t,n){var r=this.movies.get(t);return void 0===r&&(r=new Map,this.movies.set(t,r)),r.set(e.id,n),n}}],[{key:"toMovie",value:function(e){return void 0!==e.year?new ce(e.id,e.name,"",[],0,void 0,void 0,void 0,new Date(e.year,1,2)):new ce(e.id,e.name,"",[],0)}}]),e}(),cr=new or,ur=function(){function e(){Object(k["a"])(this,e),this.api=sr,this.mapper=cr}return Object(j["a"])(e,[{key:"popular",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a,s){var c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,s,c,l,p){var v,d,h,f,m,g,b,y,O,k,j,x,w,_,S,C,M,R,P,A,T,$,F,D;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v=new Set(n.map((function(e){return e[1]}))),d=new Map,h=Object(i["a"])(e.whoWatched(v,s)),t.prev=3,h.s();case 5:if((f=h.n()).done){t.next=14;break}if(m=f.value,g=c.get(m),void 0!==g){t.next=10;break}return t.abrupt("continue",12);case 10:b=Object(i["a"])(e.normalizeUserRatings(g));try{for(b.s();!(y=b.n()).done;)O=y.value,v.has(O.movieId)||(k=d.get(O.movieId),d.set(O.movieId,k?k+1:1))}catch(I){b.e(I)}finally{b.f()}case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](3),h.e(t.t0);case 19:return t.prev=19,h.f(),t.finish(19);case 22:j=[],x=Object(i["a"])(d);try{for(x.s();!(w=x.n()).done;)_=Object(o["a"])(w.value,2),S=_[0],C=_[1],j.push({m:l.get(S),cnt:C})}catch(I){x.e(I)}finally{x.f()}j.sort((function(e,t){return t.cnt-e.cnt})),M=[],R=j.slice(0,a).map((function(e){return function(){return u.mapper.toTMDB(e.m,r).then((function(t){return[e.cnt,t]}))}})),P=!1,A=!1,t.prev=30,$=Object(Ee["a"])(ae(R,e.MAX_ACTIONS));case 32:return t.next=34,$.next();case 34:if(!(P=!(F=t.sent).done)){t.next=41;break}D=F.value,M.push.apply(M,Object(J["a"])(D)),p.update(M.length,R.length);case 38:P=!1,t.next=32;break;case 41:t.next=47;break;case 43:t.prev=43,t.t1=t["catch"](30),A=!0,T=t.t1;case 47:if(t.prev=47,t.prev=48,!P||null==$.return){t.next=52;break}return t.next=52,$.return();case 52:if(t.prev=52,!A){t.next=55;break}throw T;case 55:return t.finish(52);case 56:return t.finish(47);case 57:return t.abrupt("return",M);case 58:case"end":return t.stop()}}),t,null,[[3,16,19,22],[30,43,47,57],[48,,52,56]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),t.abrupt("return",this.recommend(n,c,s));case 2:case"end":return t.stop()}}),t,this)})));function n(e,n,r,a){return t.apply(this,arguments)}return n}()},{key:"watchTogether",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a,s){var c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,s,c,l,p){var v,d,h,f,m,g,b,y,O,k,j,x,w,_,S,C,M,R,P,A,T,$,F,D,I,E,N;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v=[],d=new Set(n.map((function(e){return e[1]}))),h=0,f=Object(i["a"])(n),t.prev=4,f.s();case 6:if((m=f.n()).done){t.next=44;break}g=Object(o["a"])(m.value,2),b=g[0],y=g[1],O=[],k=e.whoWatched([y],s),j=Object(i["a"])(l.values()),t.prev=11,j.s();case 13:if((x=j.n()).done){t.next=29;break}if(w=x.value,!d.has(w.id)){t.next=17;break}return t.abrupt("continue",27);case 17:if(_=e.whoWatched([w.id],s),0!==_.size){t.next=20;break}return t.abrupt("continue",27);case 20:if(S=e.intersection(k,_).size,0!==S){t.next=23;break}return t.abrupt("continue",27);case 23:if(C=e.union(k,_).size,0!==C){t.next=26;break}return t.abrupt("continue",27);case 26:O.push({m:w,score:S/C});case 27:t.next=13;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](11),j.e(t.t0);case 34:return t.prev=34,j.f(),t.finish(34);case 37:O.sort((function(e,t){return t.score-e.score})),M=Object(i["a"])(O.slice(0,a));try{for(P=function(){var e=R.value,t=e.m,n=v.find((function(e){return e[1].id===t.id}));void 0!==n?n[0].push(b):v.push([[b],t])},M.s();!(R=M.n()).done;)P()}catch(c){M.e(c)}finally{M.f()}++h,p.update(h,n.length);case 42:t.next=6;break;case 44:t.next=49;break;case 46:t.prev=46,t.t1=t["catch"](4),f.e(t.t1);case 49:return t.prev=49,f.f(),t.finish(49);case 52:A=[],T=v.map((function(e){return function(){return u.mapper.toTMDB(e[1],r).then((function(t){return[e[0],t]}))}})),$=!1,F=!1,t.prev=56,I=Object(Ee["a"])(ae(T,e.MAX_ACTIONS));case 58:return t.next=60,I.next();case 60:if(!($=!(E=t.sent).done)){t.next=67;break}N=E.value,A.push.apply(A,Object(J["a"])(N)),p.update(A.length,v.length);case 64:$=!1,t.next=58;break;case 67:t.next=73;break;case 69:t.prev=69,t.t2=t["catch"](56),F=!0,D=t.t2;case 73:if(t.prev=73,t.prev=74,!$||null==I.return){t.next=78;break}return t.next=78,I.return();case 78:if(t.prev=78,!F){t.next=81;break}throw D;case 81:return t.finish(78);case 82:return t.finish(73);case 83:return t.abrupt("return",A);case 84:case"end":return t.stop()}}),t,null,[[4,46,49,52],[11,31,34,37],[56,69,73,83],[74,,78,82]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),t.abrupt("return",this.recommend(n,c,s));case 2:case"end":return t.stop()}}),t,this)})));function n(e,n,r,a){return t.apply(this,arguments)}return n}()},{key:"similar",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a,s,c,u,l){var p,v=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(s<=0||s>1)){t.next=3;break}return console.warn("Similarity ".concat(s," must be in (0;1] range")),t.abrupt("return",[]);case 3:if(!(n.length<a)){t.next=6;break}return console.warn("You defined ".concat(n.length," movies, but min overlap is ").concat(a)),t.abrupt("return",[]);case 6:return p=function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,l,p,d,h){var f,m,g,b,y,O,k,j,x,w,_,S,C,M,R,P,A,T,$,F,D,I,E,N,U;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f=new Set(n.map((function(e){return e[1]}))),m=e.similarUsersWithNormalizedRatings(f,a,s,p),g=new Map,b=Object(i["a"])(m.values()),t.prev=4,b.s();case 6:if((y=b.n()).done){t.next=29;break}O=y.value,k=Object(i["a"])(O.ratings),t.prev=9,k.s();case 11:if((j=k.n()).done){t.next=19;break}if(x=j.value,!f.has(x.movieId)){t.next=15;break}return t.abrupt("continue",17);case 15:w=g.get(x.movieId),g.set(x.movieId,w?w+1:1);case 17:t.next=11;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](9),k.e(t.t0);case 24:return t.prev=24,k.f(),t.finish(24);case 27:t.next=6;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t["catch"](4),b.e(t.t1);case 34:return t.prev=34,b.f(),t.finish(34);case 37:_=[],S=Object(i["a"])(g.entries()),t.prev=39,S.s();case 41:if((C=S.n()).done){t.next=51;break}if(M=Object(o["a"])(C.value,2),R=M[0],P=M[1],!f.has(R)){t.next=45;break}return t.abrupt("continue",49);case 45:if(A=e.predictRating(R,m.values()),void 0!==A){t.next=48;break}return t.abrupt("continue",49);case 48:_.push({m:d.get(R),score:A,cnt:P});case 49:t.next=41;break;case 51:t.next=56;break;case 53:t.prev=53,t.t2=t["catch"](39),S.e(t.t2);case 56:return t.prev=56,S.f(),t.finish(56);case 59:_.sort((function(e,t){return t.score-e.score})),T=[],$=_.filter((function(e){return e.cnt>=c})).slice(0,u).map((function(e){return function(){return v.mapper.toTMDB(e.m,r).then((function(t){return[e.cnt,t]}))}})),F=!1,D=!1,t.prev=64,E=Object(Ee["a"])(ae($,e.MAX_ACTIONS));case 66:return t.next=68,E.next();case 68:if(!(F=!(N=t.sent).done)){t.next=75;break}U=N.value,T.push.apply(T,Object(J["a"])(U)),h.update(T.length,$.length);case 72:F=!1,t.next=66;break;case 75:t.next=81;break;case 77:t.prev=77,t.t3=t["catch"](64),D=!0,I=t.t3;case 81:if(t.prev=81,t.prev=82,!F||null==E.return){t.next=86;break}return t.next=86,E.return();case 86:if(t.prev=86,!D){t.next=89;break}throw I;case 89:return t.finish(86);case 90:return t.finish(81);case 91:return t.abrupt("return",T);case 92:case"end":return t.stop()}}),t,null,[[4,31,34,37],[9,21,24,27],[39,53,56,59],[64,77,81,91],[82,,86,90]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),t.abrupt("return",this.recommend(n,p,l));case 8:case"end":return t.stop()}}),t,this)})));function n(e,n,r,a,i,s,o){return t.apply(this,arguments)}return n}()},{key:"recommend",value:function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(n,r,a){var i,s,o,c,u,l,p,v,d,h,f,m,g,b,y,O=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=2*n.length+3,s=0,a.update(s,i),t.next=5,this.api.getRatingsByMovies();case 5:return o=t.sent,a.update(++s,i),t.next=9,this.api.getRatingsByUsers();case 9:return c=t.sent,a.update(++s,i),t.next=13,this.api.getMovies();case 13:u=t.sent,a.update(++s,i),l=n.map((function(e){return function(){return O.mapper.toMT(e,u.values())}})),p=[],v=!1,d=!1,t.prev=19,f=Object(Ee["a"])(ae(l,e.MAX_ACTIONS));case 21:return t.next=23,f.next();case 23:if(!(v=!(m=t.sent).done)){t.next=31;break}g=m.value,p.push.apply(p,Object(J["a"])(g)),s+=g.length,a.update(s,i);case 28:v=!1,t.next=21;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t["catch"](19),d=!0,h=t.t0;case 37:if(t.prev=37,t.prev=38,!v||null==f.return){t.next=42;break}return t.next=42,f.return();case 42:if(t.prev=42,!d){t.next=45;break}throw h;case 45:return t.finish(42);case 46:return t.finish(37);case 47:return b=Object(J["a"])(sn(n,p)).filter((function(e){return void 0!==e[1]})),y={update:function(e,t){return a.update(s+e,n.length+3+t)}},t.abrupt("return",r(b,o,c,u,y));case 50:case"end":return t.stop()}}),t,this,[[19,33,37,47],[38,,42,46]])})));function n(e,n,r){return t.apply(this,arguments)}return n}()}],[{key:"intersection",value:function(e,t){if(e.size>t.size){var n=e;e=t,t=n}return new Set(Object(J["a"])(e).filter((function(e){return t.has(e)})))}},{key:"union",value:function(e,t){return new Set([].concat(Object(J["a"])(e),Object(J["a"])(t)))}},{key:"whoWatched",value:function(t,n){var r,a=new Set,s=Object(i["a"])(t);try{for(s.s();!(r=s.n()).done;){var o=r.value,c=n.get(o);c&&c.length>0&&(a=e.union(a,c.map((function(e){return e.userId}))))}}catch(u){s.e(u)}finally{s.f()}return a}},{key:"similarUsersWithNormalizedRatings",value:function(t,n,r,a){var s,c=Object(J["a"])(t).map((function(e){return new ar(e,0,.4,new Date)})),u=new Map,l=Object(i["a"])(a);try{for(l.s();!(s=l.n()).done;){var p=Object(o["a"])(s.value,2),v=p[0],d=p[1],h=d.reduce((function(e,n){return t.has(n.movieId)?e+1:e}),0);if(!(h<n)){var f=e.normalizeUserRatings(d),m=e.pearson(c,f);m<r||u.set(v,{sim:m,ratings:f})}}}catch(g){l.e(g)}finally{l.f()}return u}},{key:"predictRating",value:function(e,t){var n,r=0,a=0,s=Object(i["a"])(t);try{for(s.s();!(n=s.n()).done;){var o,c=n.value;if(!(c.sim<=0)){var u=null===(o=c.ratings.find((function(t){return t.movieId===e})))||void 0===o?void 0:o.rating;void 0!==u&&(r+=c.sim*u,a+=c.sim)}}}catch(l){s.e(l)}finally{s.f()}return 0===a?void 0:r/a}},{key:"pearson",value:function(e,t){var n,r=0,a=0,s=0,o=Object(i["a"])(e);try{var c=function(){var e=n.value,i=t.find((function(t){return t.movieId===e.movieId}));if(void 0===i)return"continue";r+=e.rating*i.rating,a+=e.rating*e.rating,s+=i.rating*i.rating};for(o.s();!(n=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}return r/Math.sqrt(a*s)}},{key:"normalizeUserRatings",value:function(e){var t=!0;if(e.length<=1)t=!1;else{var n=e[0].rating;e.filter((function(e){return e.rating===n})).length===e.length&&(t=!1)}if(!t)return e.map((function(e){return new ar(e.movieId,e.userId,0,e.date)}));var r,a=0,s=1e4,o=-1e4,c=Object(i["a"])(e);try{for(c.s();!(r=c.n()).done;){var u=r.value;a+=u.rating,s>u.rating&&(s=u.rating),o<u.rating&&(o=u.rating)}}catch(p){c.e(p)}finally{c.f()}var l=a/e.length;return e.map((function(e){return new ar(e.movieId,e.userId,(e.rating-l)/(o-s),e.date)}))}}]),e}();ur.MAX_ACTIONS=5;var lr=new ur,pr=Object(R["createModule"])("movies-by-movies",{namespaced:!0,state:{selectedMovies:[],movies:[]},mutations:{setMovies:function(e,t){e.selectedMovies=t},recommend:function(e,t){e.movies=t}}});pr.register(A);var vr=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.recommender=cn,e.mtRecommender=lr,e.progress=null,e.pageSize=9,e.currentPage=1,e.sortOptions=[{id:"popularity",n:"general.popularity"},{id:"voteAverage",n:"general.vote"}],e.filter={excludeMoviesFromSet:!1,includedGenres:[],excludedGenres:[],years:null,sort:e.sortOptions[0].id},e}return Object(j["a"])(n,[{key:"selectedMovies",get:function(){return pr.state.selectedMovies},set:function(e){pr.mutations.setMovies(e)}},{key:"allRecommendations",get:function(){return pr.state.movies},set:function(e){pr.mutations.recommend(e),this.currentPage=1,this.resetFilter()}},{key:"recommendations",get:function(){var e=this.allRecommendations;if(0===e.length)return e;if(this.filter.excludeMoviesFromSet&&this.movieSet.length>0){var t=new Set(this.movieSet.map((function(e){return e.id})));e=e.filter((function(e){return!t.has(e[1].id)}))}if(this.filter.includedGenres.length>0){var n=new Set(this.filter.includedGenres.map((function(e){return e.id})));e=e.filter((function(e){return e[1].genres.some((function(e){return n.has(e.id)}))}))}if(this.filter.excludedGenres.length>0){var r=new Set(this.filter.excludedGenres.map((function(e){return e.id})));e=e.filter((function(e){return e[1].genres.every((function(e){return!r.has(e.id)}))}))}if(null!==this.filter.years){var a=Object(o["a"])(this.filter.years,2),i=a[0],s=a[1],c=function(e){return(null===i||e.getFullYear()>=i)&&(null===s||e.getFullYear()<=s)};e=e.filter((function(e){return!e[1].releaseDate||c(e[1].releaseDate)}))}return e}},{key:"sortedRecommendations",get:function(){return vn(Object(J["a"])(this.recommendations),"0.length:desc","1.".concat(this.filter.sort,":desc"))}},{key:"genres",get:function(){var e,t=new Map,n=Object(i["a"])(this.allRecommendations);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,s=Object(i["a"])(a[1].genres);try{for(s.s();!(r=s.n()).done;){var o=r.value;t.set(o.id,o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return Object(J["a"])(t.values()).sort((function(e,t){return e.name.localeCompare(t.name)}))}},{key:"yearRange",get:function(){var e,t=1400,n=9e3,r=Object(i["a"])(this.allRecommendations);try{for(r.s();!(e=r.n()).done;){var a,s=e.value,o=null===(a=s[1].releaseDate)||void 0===a?void 0:a.getFullYear();void 0!==o&&(t=o>t?o:t,n=o<n?o:n)}}catch(c){r.e(c)}finally{r.f()}return[n,t]}},{key:"lang",get:function(){return T.state.lang}},{key:"movieSet",get:function(){return lt.state.selectedMovies}},{key:"isSearching",get:function(){return null!==this.progress}},{key:"onPageChange",value:function(e){this.currentPage=e}},{key:"recommendationSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMovies((function(e){return t.recommender.recommendMoviesByMovies(new Set(t.selectedMovies),t.lang,e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"collectionSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMovies((function(e){return t.recommender.recommendMoviesFromCollection(new Set(t.selectedMovies),t.lang,e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"watchTogetherSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMovies((function(e){return t.mtRecommender.watchTogether(t.selectedMovies,t.lang,30,e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"similarSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMovies((function(e){return t.mtRecommender.similar(t.selectedMovies,t.lang,3,.3,5,200,e).then((function(e){return e.map((function(e){return[{length:e[0]},e[1]]}))}))}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"popularSearch",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMovies((function(e){return t.mtRecommender.popular(t.selectedMovies,t.lang,250,e).then((function(e){return e.map((function(e){return[{length:e[0]},e[1]]}))}))}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchMovies",value:function(){var e=Object(B["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isSearching){e.next=10;break}return e.prev=1,this.progress=[0,100],n={update:function(e,t){r.progress=[e,t]}},e.next=6,t(n);case 6:this.allRecommendations=e.sent;case 7:return e.prev=7,this.progress=null,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetFilter",value:function(){this.filter.excludeMoviesFromSet=!1,this.filter.includedGenres=[],this.filter.excludedGenres=[],this.filter.years=null}}]),n}(S["d"]);vr=Object(_["a"])([Object(S["a"])({components:{MovieSelector:ft,MovieTileView:Wn,PageableList:rn,MovieFilters:Bn,ModalProgress:W}})],vr);var dr=vr,hr=dr,fr=(n("5499"),Object(I["a"])(hr,tr,nr,!1,null,"8e04f88c",null)),mr=fr.exports,gr=function(e){Object(x["a"])(n,e);var t=Object(w["a"])(n);function n(){var e;return Object(k["a"])(this,n),e=t.apply(this,arguments),e.pages=[{name:"pages.searchByActors",component:er},{name:"pages.searchByMovies",component:mr},{name:"pages.searchActorsByMovies",component:gn},{name:"pages.actorSet",component:Qe},{name:"pages.movieSet",component:Ot}],e.currentPage=e.pages[0],e.siteName="siteName",e}return Object(j["a"])(n,[{key:"navigate",value:function(e){var t=this.pages.find((function(t){return t.name===e}));void 0!==t&&(this.currentPage=t)}}]),n}(S["d"]);gr=Object(_["a"])([Object(S["a"])({components:{SearchByMoviePage:mr,NavBar:N,SearchByActorPage:er,MovieSetPage:Ot,ActorSetPage:Qe,SearchActorsByMoviePage:gn}})],gr);var br=gr,yr=br,Or=(n("034f"),Object(I["a"])(yr,y,O,!1,null,null,null)),kr=Or.exports;n("ab8b");a["a"].config.productionTip=!1,new a["a"]({i18n:b,render:function(e){return e(kr)}}).$mount("#app")},e03a:function(e,t,n){"use strict";n("8e8a")},f702:function(e,t,n){"use strict";n("515c")},fa1d:function(e,t,n){e.exports=n.p+"img/no-person.a9b49387.svg"}});